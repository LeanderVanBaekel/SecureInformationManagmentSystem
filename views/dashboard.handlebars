{{> header}}

<div class="container" id="dashboard">

	{{> side-nav}}

	<main>
		{{!-- <div class="dashboard-info">
			<p>gebruiker: {{req.session.userName}}</p>
			<h1>{{title}}</h1>
		</div> --}}

		<div class="dashboard-container">

			<div class="dashboard-col">
				<div class="dashboard-col-header">
					<h2>Recente projecten</h2>
				</div>
				{{#each recentProjects}}
				<a class="dashboard-tile" href="/projects/{{_id}}">
					<div class="project-logo" style="background-image: url('http://iamcore.nl/wp-content/uploads/2016/05/AC.png')"></div>
					<div class="tile-text">
						<h2>{{name}}</h2>
						<h3>{{clientName}}</h3>
					</div>
					{{!-- <p>{{date}}</p> --}}
					<div class="circle n-{{../req.session.user.permissionId}}">
						<p>{{../req.session.user.permissionId}}</p>
					</div>
				</a>
				{{/each}}
			</div>

			<div class="dashboard-col">
				<div class="dashboard-col-header">
					<h2>Belangrijke projecten</h2>
				</div>
			</div>

			<div class="dashboard-col">
				<div class="dashboard-col-header">
					<h2>Nieuwe projecten</h2>
				</div>
			</div>

		</div>
	</main>
</div>

<script type="text/javascript">
var items = document.querySelectorAll('.dashboard-tile');
	var cols = document.querySelectorAll('.dashboard-col');
	if (items.length == 3) {
		var item = items[items.length -1];
		cols[1].appendChild(item);
	} else if (items.length == 4) {
		var item = items[items.length -1];
		cols[1].appendChild(item);
		item = items[items.length -2];
		cols[2].appendChild(item);
	} else if (items.length > 4) {
		var item = items[items.length -1];
		cols[1].appendChild(item);
		item = items[items.length -2];
		cols[2].appendChild(item);
		item = items[items.length -3];
		cols[1].appendChild(item);
	}
</script>
